{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Add a Publisher column to the Territories table, showing the publisher from the most recent checkout when Checked Out and a gray em dash when Available.",
  "architectural_notes": [
    "Territories table is rendered directly in frontend/src/pages/Territories.tsx (not a separate component).",
    "Publishers data is fetched via usePublishers hook in frontend/src/hooks/useQueries.ts (returns publisher array with id and name).",
    "Publisher shown for a territory should be derived from that territory’s most recent checkout record."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-update-the-territories-table-on-the-territories-page-frontend-src-pages-territories-tsx-to-include-a-new-column-titled-publisher-positioned-between-the-territory-number-column-and-the-status-column-adjusting-the-column-order-as-needed-to-satisfy-this-placement-while-keeping-all-other-functionality-unchanged",
      "title": "Update the Territories table on the Territories page (frontend/src/pages/Territories.tsx) to include a new column titled \"Publisher\" positioned between the \"Territory Number\" column and the \"Status\" column, adjusting the column order as needed to satisfy this placement while keeping all other functionality unchanged.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-for-each-territory-row-on-the-territories-page-render-the-publisher-cell-value-based-on-the-territory-s-most-recent-checkout-record-if-territory-status-is-checked-out-show-the-publisher-name-from-the-most-recent-checkout-record-for-that-territory-if-territory-status-is-available-show-an-em-dash-styled-in-gray-muted",
      "title": "For each territory row on the Territories page, render the \"Publisher\" cell value based on the territory’s most recent checkout record: if territory.status is \"Checked Out\", show the publisher name from the most recent checkout record for that territory; if territory.status is \"Available\", show an em dash (\"—\") styled in gray (muted).",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-use-the-existing-publishers-query-hook-from-frontend-src-hooks-usequeries-ts-usegetallpublishers-in-territories-tsx-to-ensure-the-displayed-publisher-name-is-correct-and-consistent-with-the-rest-of-the-app-prefer-the-publisher-name-on-the-checkout-record-when-available-otherwise-resolve-the-name-via-the-publishers-list-by-publisher-id-if-present-in-the-checkout-record-model",
      "title": "Use the existing publishers query hook from frontend/src/hooks/useQueries.ts (useGetAllPublishers) in Territories.tsx to ensure the displayed publisher name is correct and consistent with the rest of the app; prefer the publisher name on the checkout record when available, otherwise resolve the name via the publishers list by publisher ID if present in the checkout record model.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add 'Publisher' column to Territories table (between Number and Status) showing publisher from most recent checkout when Checked Out, otherwise gray '—'",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "projectName": "Add Publisher column to Territories table (from most recent checkout)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}