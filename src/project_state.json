{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Build Shepherding Visits app UI: add a Visit Profile page for individual shepherding visits with notes editing plus edit/delete visit actions, using existing backend data.",
  "architectural_notes": [
    "Use route /shepherding/:id where :id is the visit's unique ID (publisher name is not unique).",
    "Backend already has visit.notes as a single Text field (default empty string); UI should edit this existing field.",
    "visit.eldersPresent is stored as a single free-text string (comma-separated names), not a list."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-update-the-shepherding-visits-list-so-the-publisher-name-cell-navigates-to-a-visit-specific-profile-route-using-the-visit-s-unique-id-not-publisher-name-clicking-a-row-s-publisher-name-must-navigate-to-shepherding-id-where-id-is-visit-id",
      "title": "Update the Shepherding Visits list so the Publisher Name cell navigates to a visit-specific profile route using the visit’s unique ID (not publisher name). Clicking a row’s Publisher Name must navigate to `/shepherding/:id`, where `:id` is `visit.id`.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-new-routed-page-for-the-visit-profile-at-shepherding-id-and-register-it-in-frontend-src-app-tsx-using-tanstack-router-similar-to-existing-profile-routes-e-g-territories-id-publishers-id",
      "title": "Add a new routed page for the Visit Profile at `/shepherding/$id` and register it in `frontend/src/App.tsx` using TanStack Router, similar to existing profile routes (e.g. `/territories/$id`, `/publishers/$id`).",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-visit-profile-page-ui-to-display-the-selected-visit-s-details-and-actions-show-publisher-name-as-the-page-heading-show-visit-date-formatted-like-feb-7-2026-show-elders-present-as-a-single-free-text-string-include-a-top-left-button-labeled-back-to-shepherding-visits-that-navigates-to-shepherding-include-edit-and-delete-buttons-in-the-top-right",
      "title": "Implement the Visit Profile page UI to display the selected visit’s details and actions: show Publisher Name as the page heading; show Visit Date formatted like `Feb 7, 2026`; show Elders Present as a single free-text string; include a top-left button labeled `Back to Shepherding Visits` that navigates to `/shepherding`; include `Edit` and `Delete` buttons in the top-right.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-add-a-notes-section-on-the-visit-profile-page-that-allows-viewing-and-editing-the-existing-backend-notes-text-field-for-the-visit-the-section-must-include-a-textarea-bound-to-the-visit-s-notes-and-a-save-notes-button-with-background-color-43587a-when-save-notes-is-clicked-persist-the-updated-notes-to-the-backend-for-that-visit-and-show-a-green-success-toast-with-the-exact-text-notes-saved-successfully",
      "title": "Add a Notes section on the Visit Profile page that allows viewing and editing the existing backend `notes : Text` field for the visit. The section must include a textarea bound to the visit’s notes and a `Save Notes` button with background color `#43587A`. When `Save Notes` is clicked, persist the updated notes to the backend for that visit and show a green success toast with the exact text `Notes saved successfully!`.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-visit-edit-flow-on-the-visit-profile-page-clicking-edit-opens-a-modal-pre-filled-with-the-visit-s-current-data-and-includes-required-fields-publisher-dropdown-required-pre-selected-visit-date-date-picker-required-pre-filled-elders-present-text-input-required-pre-filled-the-modal-must-have-save-and-cancel-buttons-clicking-save-must-update-the-visit-in-the-backend-refresh-the-visit-profile-page-data-and-show-a-green-success-toast-with-exact-text-visit-updated-successfully",
      "title": "Implement the Visit Edit flow on the Visit Profile page: clicking `Edit` opens a modal pre-filled with the visit’s current data and includes required fields: Publisher (dropdown, required, pre-selected), Visit Date (date picker, required, pre-filled), Elders Present (text input, required, pre-filled). The modal must have `Save` and `Cancel` buttons. Clicking `Save` must update the visit in the backend, refresh the Visit Profile page data, and show a green success toast with exact text `Visit updated successfully!`.",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    },
    {
      "id": "feature-implement-the-visit-delete-flow-on-the-visit-profile-page-clicking-delete-opens-a-confirmation-dialog-with-the-exact-title-text-delete-this-visit-and-yes-and-cancel-buttons-clicking-yes-must-delete-the-visit-from-the-backend-navigate-back-to-shepherding-and-show-a-green-success-toast-with-exact-text-visit-deleted-successfully",
      "title": "Implement the Visit Delete flow on the Visit Profile page: clicking `Delete` opens a confirmation dialog with the exact title text `Delete this visit?` and `Yes` and `Cancel` buttons. Clicking `Yes` must delete the visit from the backend, navigate back to `/shepherding`, and show a green success toast with exact text `Visit deleted successfully!`.",
      "reqIds": [
        "REQ-6"
      ],
      "version": 1
    },
    {
      "id": "feature-add-ensure-frontend-react-query-hooks-needed-by-the-visit-profile-page-to-load-a-single-shepherding-visit-by-id-and-to-perform-update-delete-notes-save-mutations-using-the-existing-backend-actor-api-created-in-prompt-29-30-mutations-must-invalidate-the-appropriate-react-query-cache-keys-so-the-shepherding-visits-list-shepherdingvisits-and-the-single-visit-query-are-refreshed-correctly",
      "title": "Add/ensure frontend React Query hooks needed by the Visit Profile page to load a single shepherding visit by ID and to perform update/delete/notes-save mutations, using the existing backend actor API created in PROMPT #29-30. Mutations must invalidate the appropriate React Query cache keys so the Shepherding Visits list (`['shepherdingVisits']`) and the single-visit query are refreshed correctly.",
      "reqIds": [
        "REQ-7"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add Visit Profile page (/shepherding/:id) with visit details, notes editing (save to backend + success toast), edit modal (update backend + toast), and delete confirmation (delete backend + navigate back + toast); make Publisher Name in list link to visit by unique ID.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "projectName": "Add Shepherding Visit Profile page with notes editing and edit/delete actions",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}