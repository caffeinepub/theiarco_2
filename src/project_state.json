{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Territories management app with an existing Territories list/table and backend checkout history; next work is adding a Checked Out Duration column that calculates months since latest active checkout and highlights long checkouts.",
  "architectural_notes": [
    "Territory records include checkOutHistory array of checkout records.",
    "Checkout record fields: publisherId (Text), publisherName (Text), dateCheckedOut (Int timestamp seconds), dateReturned (?Int; null when active), isCampaign (Bool).",
    "Statuses: Available, Checked Out, Under Review.",
    "Duration display: for Checked Out only, use most recent checkout record where dateReturned is null; months = floor((now - dateCheckedOut)/(30*24*60*60)); render as 'X months'.",
    "UI styling: apply subtle light red background (e.g., Tailwind bg-red-50 or bg-red-100) to entire row when checked out duration >= 4 months; otherwise no red background; show '—' for non-Checked Out statuses."
  ],
  "known_issues": [],
  "isFixRequest": false,
  "existing_features": [
    {
      "id": "feature-update-the-existing-territories-list-page-table-frontend-src-pages-territories-tsx-to-add-a-new-column-titled-checked-out-duration-immediately-after-the-existing-status-column-without-changing-any-other-table-behavior",
      "title": "Update the existing Territories list page table (frontend/src/pages/Territories.tsx) to add a new column titled \"Checked Out Duration\" immediately after the existing \"Status\" column, without changing any other table behavior.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-for-each-territory-row-in-the-territories-list-table-compute-and-display-the-checked-out-duration-in-months-only-when-territory-status-is-exactly-checked-out-use-the-most-recent-checkout-record-in-territory-checkouthistory-where-datereturned-is-null-i-e-the-active-checkout-calculate-months-as-floor-currenttimestampseconds-datecheckedout-30-24-60-60-and-render-the-cell-text-as-x-months-e-g-0-months-2-months-if-no-active-checkout-record-exists-display",
      "title": "For each territory row in the Territories list table, compute and display the checked-out duration in months only when territory.status is exactly \"Checked Out\". Use the most recent checkout record in territory.checkOutHistory where dateReturned is null (i.e., the active checkout). Calculate months as floor((currentTimestampSeconds - dateCheckedOut) / (30 * 24 * 60 * 60)) and render the cell text as \"[X] months\" (e.g., \"0 months\", \"2 months\"). If no active checkout record exists, display \"—\".",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-for-territories-with-status-exactly-available-or-exactly-under-review-render-em-dash-in-the-checked-out-duration-column-and-do-not-apply-any-red-background-styling",
      "title": "For territories with status exactly \"Available\" or exactly \"Under Review\", render \"—\" (em dash) in the \"Checked Out Duration\" column and do not apply any red background styling.",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-conditionally-apply-a-subtle-light-red-background-to-the-entire-territories-table-row-when-a-territory-status-is-exactly-checked-out-and-b-the-computed-months-checked-out-is-4-or-more-use-a-tailwind-class-such-as-bg-red-50-or-bg-red-100-subtle-but-noticeable-applied-to-the-full-tablerow",
      "title": "Conditionally apply a subtle light red background to the entire Territories table row when (a) territory.status is exactly \"Checked Out\" and (b) the computed months checked out is 4 or more. Use a Tailwind class such as bg-red-50 or bg-red-100 (subtle but noticeable) applied to the full <TableRow>.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Add 'Checked Out Duration' column to Territories list, computed from latest active checkout (dateReturned=null), and highlight rows red when duration >= 4 months",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "gameProjectType": "none",
  "projectName": "Add Checked Out Duration column and highlight long checkouts in Territories table",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}